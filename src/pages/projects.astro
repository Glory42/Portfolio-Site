---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Terminal from '../components/Terminal.astro';
---

<Layout title="Görkem Karyol - Projects">
	<Terminal>
		<div class="flex flex-col justify-start p-5 flex-1 overflow-y-scroll [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden">
			<p id="command" class="mb-4 text-xs sm:text-sm md:text-base lg:text-lg">
				GörkemKaryol@gorkemkaryol.dev ~ $ <span id="typed"></span><span class="cursor">|</span>
			</p>
			<div id="navbar" class="top-0 w-full z-10 hidden fade-in">
				<Navbar />
			</div>
			<div id="content" class="hidden">
				<div class="border-3 border-gray-700 p-4 min-h-[180px] w-[95%] max-w-[700px] 
                            my-5 mx-auto flex flex-col justify-center text-center rounded-3xl
         					transition-all duration-300 ease-in-out shadow-[0_2px_5px_rgba(0,0,0,0.3)] 
                            hover:-translate-y-0.5 hover:bg-gray-900 ">
					<p class="font-bold text-3xl mb-1 text-white leading-tight pointer-events-none">GitHub Contributions</p>
					<div id="contributions-grid" class="flex flex-col gap-0.5 p-3 w-full max-w-full justify-center items-center overflow-auto"></div>
				</div>
                <div id="projects-container" class="flex flex-wrap justify-center items-stretch gap-8 w-full max-w-5xl mx-auto"></div>
			</div>
		</div>
	</Terminal>

	<script>
		import { typeWriter } from '../scripts/effects/Typewriter.ts';
		import { fetchContributions } from '../scripts/fetchers/GithubStatusFetcher.ts';
        import { fetchGithubProjects } from '../scripts/fetchers/GithubProjectFetcher.ts';

		document.addEventListener('DOMContentLoaded', () => {
			const typedEl = document.getElementById('typed');
			const contentEl = document.getElementById('content');
			const navbarEl = document.getElementById('navbar');

			if (typedEl && contentEl && navbarEl) {
				typeWriter(typedEl, "cd /projects", 10, () => {
					contentEl.classList.remove("hidden");
					contentEl.classList.add("fade-in");
					navbarEl.classList.remove("hidden");
					navbarEl.classList.add("fade-in");
					fetchContributions();
                    fetchGithubProjects();
				});
			}
		});
	</script>
</Layout>